var e,t;e=this,t=function(){"use strict";function Lt(i,n){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);n&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),r.push.apply(r,o)}return r}function J(i){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Lt(Object(r),!0).forEach(function(o){ht(i,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(r,o))})}return i}function ut(i){return ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ut(i)}function x(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}function Ot(i,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}function w(i,n,r){return n&&Ot(i.prototype,n),r&&Ot(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}function ht(i,n,r){return n in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i}function R(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(i,"prototype",{value:Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),writable:!1}),n&&lt(i,n)}function Z(i){return Z=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Z(i)}function lt(i,n){return lt=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},lt(i,n)}function te(i,n){if(n&&(typeof n=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(i)}function F(i){var n=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,o=Z(i);if(n){var a=Z(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return te(this,r)}}function W(i){return function(n){if(Array.isArray(n))return ft(n)}(i)||function(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}(i)||function(n,r){if(n){if(typeof n=="string")return ft(n,r);var o=Object.prototype.toString.call(n).slice(8,-1);return o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set"?Array.from(n):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?ft(n,r):void 0}}(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ft(i,n){(n==null||n>i.length)&&(n=i.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=i[r];return o}function $(i){return Array.isArray?Array.isArray(i):At(i)==="[object Array]"}function I(i){return typeof i=="string"}function jt(i){return typeof i=="number"}function ee(i){return i===!0||i===!1||function(n){return It(n)&&n!==null}(i)&&At(i)=="[object Boolean]"}function It(i){return ut(i)==="object"}function S(i){return i!=null}function dt(i){return!i.trim().length}function At(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}var ne=function(i){return"Invalid value for key ".concat(i)},re=function(i){return"Pattern length exceeds max of ".concat(i,".")},Ct=Object.prototype.hasOwnProperty,ie=function(){function i(n){var r=this;x(this,i),this._keys=[],this._keyMap={};var o=0;n.forEach(function(a){var s=Et(a);o+=s.weight,r._keys.push(s),r._keyMap[s.id]=s,o+=s.weight}),this._keys.forEach(function(a){a.weight/=o})}return w(i,[{key:"get",value:function(n){return this._keyMap[n]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),i}();function Et(i){var n=null,r=null,o=null,a=1,s=null;if(I(i)||$(i))o=i,n=$t(i),r=gt(i);else{if(!Ct.call(i,"name"))throw new Error(function(u){return"Missing ".concat(u," property in key")}("name"));var c=i.name;if(o=c,Ct.call(i,"weight")&&(a=i.weight)<=0)throw new Error(function(u){return"Property 'weight' in key '".concat(u,"' must be a positive integer")}(c));n=$t(c),r=gt(c),s=i.getFn}return{path:n,id:r,weight:a,src:o,getFn:s}}function $t(i){return $(i)?i:i.split(".")}function gt(i){return $(i)?i.join("."):i}var oe={useExtendedSearch:!1,getFn:function(i,n){var r=[],o=!1;return function a(s,c,u){if(S(s))if(c[u]){var h=s[c[u]];if(!S(h))return;if(u===c.length-1&&(I(h)||jt(h)||ee(h)))r.push(function(d){return d==null?"":function(y){if(typeof y=="string")return y;var v=y+"";return v=="0"&&1/y==-1/0?"-0":v}(d)}(h));else if($(h)){o=!0;for(var l=0,f=h.length;l<f;l+=1)a(h[l],c,u+1)}else c.length&&a(h,c,u+1)}else r.push(s)}(i,I(n)?n.split("."):n,0),o?r:r[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},g=J(J(J(J({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(i,n){return i.score===n.score?i.idx<n.idx?-1:1:i.score<n.score?-1:1}}),{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1}),{location:0,threshold:.6,distance:100}),oe),ae=/[^ ]+/g;function se(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,r=new Map,o=Math.pow(10,n);return{get:function(a){var s=a.match(ae).length;if(r.has(s))return r.get(s);var c=1/Math.pow(s,.5*i),u=parseFloat(Math.round(c*o)/o);return r.set(s,u),u},clear:function(){r.clear()}}}var vt=function(){function i(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.getFn,o=r===void 0?g.getFn:r,a=n.fieldNormWeight,s=a===void 0?g.fieldNormWeight:a;x(this,i),this.norm=se(s,3),this.getFn=o,this.isCreated=!1,this.setIndexRecords()}return w(i,[{key:"setSources",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.docs=n}},{key:"setIndexRecords",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.records=n}},{key:"setKeys",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.keys=r,this._keysMap={},r.forEach(function(o,a){n._keysMap[o.id]=a})}},{key:"create",value:function(){var n=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,I(this.docs[0])?this.docs.forEach(function(r,o){n._addString(r,o)}):this.docs.forEach(function(r,o){n._addObject(r,o)}),this.norm.clear())}},{key:"add",value:function(n){var r=this.size();I(n)?this._addString(n,r):this._addObject(n,r)}},{key:"removeAt",value:function(n){this.records.splice(n,1);for(var r=n,o=this.size();r<o;r+=1)this.records[r].i-=1}},{key:"getValueForItemAtKeyId",value:function(n,r){return n[this._keysMap[r]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(n,r){if(S(n)&&!dt(n)){var o={v:n,i:r,n:this.norm.get(n)};this.records.push(o)}}},{key:"_addObject",value:function(n,r){var o=this,a={i:r,$:{}};this.keys.forEach(function(s,c){var u=s.getFn?s.getFn(n):o.getFn(n,s.path);if(S(u)){if($(u))(function(){for(var l=[],f=[{nestedArrIndex:-1,value:u}];f.length;){var d=f.pop(),y=d.nestedArrIndex,v=d.value;if(S(v))if(I(v)&&!dt(v)){var p={v,i:y,n:o.norm.get(v)};l.push(p)}else $(v)&&v.forEach(function(k,m){f.push({nestedArrIndex:m,value:k})})}a.$[c]=l})();else if(I(u)&&!dt(u)){var h={v:u,n:o.norm.get(u)};a.$[c]=h}}}),this.records.push(a)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),i}();function Rt(i,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=r.getFn,a=o===void 0?g.getFn:o,s=r.fieldNormWeight,c=s===void 0?g.fieldNormWeight:s,u=new vt({getFn:a,fieldNormWeight:c});return u.setKeys(i.map(Et)),u.setSources(n),u.create(),u}function T(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.errors,o=r===void 0?0:r,a=n.currentLocation,s=a===void 0?0:a,c=n.expectedLocation,u=c===void 0?0:c,h=n.distance,l=h===void 0?g.distance:h,f=n.ignoreLocation,d=f===void 0?g.ignoreLocation:f,y=o/i.length;if(d)return y;var v=Math.abs(u-s);return l?y+v/l:v?1:y}function ce(){for(var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.minMatchCharLength,r=[],o=-1,a=-1,s=0,c=i.length;s<c;s+=1){var u=i[s];u&&o===-1?o=s:u||o===-1||((a=s-1)-o+1>=n&&r.push([o,a]),o=-1)}return i[s-1]&&s-o>=n&&r.push([o,s-1]),r}var z=32;function ue(i){for(var n={},r=0,o=i.length;r<o;r+=1){var a=i.charAt(r);n[a]=(n[a]||0)|1<<o-r-1}return n}var Ft=function(){function i(n){var r=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.location,s=a===void 0?g.location:a,c=o.threshold,u=c===void 0?g.threshold:c,h=o.distance,l=h===void 0?g.distance:h,f=o.includeMatches,d=f===void 0?g.includeMatches:f,y=o.findAllMatches,v=y===void 0?g.findAllMatches:y,p=o.minMatchCharLength,k=p===void 0?g.minMatchCharLength:p,m=o.isCaseSensitive,M=m===void 0?g.isCaseSensitive:m,b=o.ignoreLocation,_=b===void 0?g.ignoreLocation:b;if(x(this,i),this.options={location:s,threshold:u,distance:l,includeMatches:d,findAllMatches:v,minMatchCharLength:k,isCaseSensitive:M,ignoreLocation:_},this.pattern=M?n:n.toLowerCase(),this.chunks=[],this.pattern.length){var O=function(C,Mt){r.chunks.push({pattern:C,alphabet:ue(C),startIndex:Mt})},L=this.pattern.length;if(L>z){for(var A=0,V=L%z,tt=L-V;A<tt;)O(this.pattern.substr(A,z),A),A+=z;if(V){var B=L-z;O(this.pattern.substr(B),B)}}else O(this.pattern,0)}}return w(i,[{key:"searchIn",value:function(n){var r=this.options,o=r.isCaseSensitive,a=r.includeMatches;if(o||(n=n.toLowerCase()),this.pattern===n){var s={isMatch:!0,score:0};return a&&(s.indices=[[0,n.length-1]]),s}var c=this.options,u=c.location,h=c.distance,l=c.threshold,f=c.findAllMatches,d=c.minMatchCharLength,y=c.ignoreLocation,v=[],p=0,k=!1;this.chunks.forEach(function(M){var b=M.pattern,_=M.alphabet,O=M.startIndex,L=function(B,C,Mt){var D=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Jt=D.location,je=Jt===void 0?g.location:Jt,Vt=D.distance,et=Vt===void 0?g.distance:Vt,Bt=D.threshold,Ie=Bt===void 0?g.threshold:Bt,Gt=D.findAllMatches,Ae=Gt===void 0?g.findAllMatches:Gt,Ht=D.minMatchCharLength,Kt=Ht===void 0?g.minMatchCharLength:Ht,Qt=D.includeMatches,Xt=Qt===void 0?g.includeMatches:Qt,Yt=D.ignoreLocation,nt=Yt===void 0?g.ignoreLocation:Yt;if(C.length>z)throw new Error(re(z));for(var rt,G=C.length,Y=B.length,j=Math.max(0,Math.min(je,Y)),H=Ie,K=j,it=Kt>1||Xt,bt=it?Array(Y):[];(rt=B.indexOf(C,K))>-1;){var Ce=T(C,{currentLocation:rt,expectedLocation:j,distance:et,ignoreLocation:nt});if(H=Math.min(Ce,H),K=rt+G,it)for(var xt=0;xt<G;)bt[rt+xt]=1,xt+=1}K=-1;for(var ot=[],wt=1,at=G+Y,Ee=1<<G-1,U=0;U<G;U+=1){for(var st=0,P=at;st<P;)T(C,{errors:U,currentLocation:j+P,expectedLocation:j,distance:et,ignoreLocation:nt})<=H?st=P:at=P,P=Math.floor((at-st)/2+st);at=P;var Zt=Math.max(1,j-P+1),St=Ae?Y:Math.min(j+P,Y)+G,Q=Array(St+2);Q[St+1]=(1<<U)-1;for(var E=St;E>=Zt;E-=1){var ct=E-1,Tt=Mt[B.charAt(ct)];if(it&&(bt[ct]=+!!Tt),Q[E]=(Q[E+1]<<1|1)&Tt,U&&(Q[E]|=(ot[E+1]|ot[E])<<1|1|ot[E+1]),Q[E]&Ee&&(wt=T(C,{errors:U,currentLocation:ct,expectedLocation:j,distance:et,ignoreLocation:nt}))<=H){if(H=wt,(K=ct)<=j)break;Zt=Math.max(1,2*j-K)}}if(T(C,{errors:U+1,currentLocation:j,expectedLocation:j,distance:et,ignoreLocation:nt})>H)break;ot=Q}var _t={isMatch:K>=0,score:Math.max(.001,wt)};if(it){var qt=ce(bt,Kt);qt.length?Xt&&(_t.indices=qt):_t.isMatch=!1}return _t}(n,b,_,{location:u+O,distance:h,threshold:l,findAllMatches:f,minMatchCharLength:d,includeMatches:a,ignoreLocation:y}),A=L.isMatch,V=L.score,tt=L.indices;A&&(k=!0),p+=V,A&&tt&&(v=[].concat(W(v),W(tt)))});var m={isMatch:k,score:k?p/this.chunks.length:1};return k&&a&&(m.indices=v),m}}]),i}(),N=function(){function i(n){x(this,i),this.pattern=n}return w(i,[{key:"search",value:function(){}}],[{key:"isMultiMatch",value:function(n){return Nt(n,this.multiRegex)}},{key:"isSingleMatch",value:function(n){return Nt(n,this.singleRegex)}}]),i}();function Nt(i,n){var r=i.match(n);return r?r[1]:null}var he=function(i){R(r,i);var n=F(r);function r(o){return x(this,r),n.call(this,o)}return w(r,[{key:"search",value:function(o){var a=o===this.pattern;return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"exact"}},{key:"multiRegex",get:function(){return/^="(.*)"$/}},{key:"singleRegex",get:function(){return/^=(.*)$/}}]),r}(N),le=function(i){R(r,i);var n=F(r);function r(o){return x(this,r),n.call(this,o)}return w(r,[{key:"search",value:function(o){var a=o.indexOf(this.pattern)===-1;return{isMatch:a,score:a?0:1,indices:[0,o.length-1]}}}],[{key:"type",get:function(){return"inverse-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"$/}},{key:"singleRegex",get:function(){return/^!(.*)$/}}]),r}(N),fe=function(i){R(r,i);var n=F(r);function r(o){return x(this,r),n.call(this,o)}return w(r,[{key:"search",value:function(o){var a=o.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"prefix-exact"}},{key:"multiRegex",get:function(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^\^(.*)$/}}]),r}(N),de=function(i){R(r,i);var n=F(r);function r(o){return x(this,r),n.call(this,o)}return w(r,[{key:"search",value:function(o){var a=!o.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,o.length-1]}}}],[{key:"type",get:function(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^!\^(.*)$/}}]),r}(N),ge=function(i){R(r,i);var n=F(r);function r(o){return x(this,r),n.call(this,o)}return w(r,[{key:"search",value:function(o){var a=o.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[o.length-this.pattern.length,o.length-1]}}}],[{key:"type",get:function(){return"suffix-exact"}},{key:"multiRegex",get:function(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^(.*)\$$/}}]),r}(N),ve=function(i){R(r,i);var n=F(r);function r(o){return x(this,r),n.call(this,o)}return w(r,[{key:"search",value:function(o){var a=!o.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,o.length-1]}}}],[{key:"type",get:function(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^!(.*)\$$/}}]),r}(N),Pt=function(i){R(r,i);var n=F(r);function r(o){var a,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=s.location,u=c===void 0?g.location:c,h=s.threshold,l=h===void 0?g.threshold:h,f=s.distance,d=f===void 0?g.distance:f,y=s.includeMatches,v=y===void 0?g.includeMatches:y,p=s.findAllMatches,k=p===void 0?g.findAllMatches:p,m=s.minMatchCharLength,M=m===void 0?g.minMatchCharLength:m,b=s.isCaseSensitive,_=b===void 0?g.isCaseSensitive:b,O=s.ignoreLocation,L=O===void 0?g.ignoreLocation:O;return x(this,r),(a=n.call(this,o))._bitapSearch=new Ft(o,{location:u,threshold:l,distance:d,includeMatches:v,findAllMatches:k,minMatchCharLength:M,isCaseSensitive:_,ignoreLocation:L}),a}return w(r,[{key:"search",value:function(o){return this._bitapSearch.searchIn(o)}}],[{key:"type",get:function(){return"fuzzy"}},{key:"multiRegex",get:function(){return/^"(.*)"$/}},{key:"singleRegex",get:function(){return/^(.*)$/}}]),r}(N),Wt=function(i){R(r,i);var n=F(r);function r(o){return x(this,r),n.call(this,o)}return w(r,[{key:"search",value:function(o){for(var a,s=0,c=[],u=this.pattern.length;(a=o.indexOf(this.pattern,s))>-1;)s=a+u,c.push([a,s-1]);var h=!!c.length;return{isMatch:h,score:h?0:1,indices:c}}}],[{key:"type",get:function(){return"include"}},{key:"multiRegex",get:function(){return/^'"(.*)"$/}},{key:"singleRegex",get:function(){return/^'(.*)$/}}]),r}(N),yt=[he,Wt,fe,de,ve,ge,le,Pt],zt=yt.length,ye=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;function pe(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i.split("|").map(function(r){for(var o=r.trim().split(ye).filter(function(p){return p&&!!p.trim()}),a=[],s=0,c=o.length;s<c;s+=1){for(var u=o[s],h=!1,l=-1;!h&&++l<zt;){var f=yt[l],d=f.isMultiMatch(u);d&&(a.push(new f(d,n)),h=!0)}if(!h)for(l=-1;++l<zt;){var y=yt[l],v=y.isSingleMatch(u);if(v){a.push(new y(v,n));break}}}return a})}var me=new Set([Pt.type,Wt.type]),ke=function(){function i(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.isCaseSensitive,a=o===void 0?g.isCaseSensitive:o,s=r.includeMatches,c=s===void 0?g.includeMatches:s,u=r.minMatchCharLength,h=u===void 0?g.minMatchCharLength:u,l=r.ignoreLocation,f=l===void 0?g.ignoreLocation:l,d=r.findAllMatches,y=d===void 0?g.findAllMatches:d,v=r.location,p=v===void 0?g.location:v,k=r.threshold,m=k===void 0?g.threshold:k,M=r.distance,b=M===void 0?g.distance:M;x(this,i),this.query=null,this.options={isCaseSensitive:a,includeMatches:c,minMatchCharLength:h,findAllMatches:y,ignoreLocation:f,location:p,threshold:m,distance:b},this.pattern=a?n:n.toLowerCase(),this.query=pe(this.pattern,this.options)}return w(i,[{key:"searchIn",value:function(n){var r=this.query;if(!r)return{isMatch:!1,score:1};var o=this.options,a=o.includeMatches;n=o.isCaseSensitive?n:n.toLowerCase();for(var s=0,c=[],u=0,h=0,l=r.length;h<l;h+=1){var f=r[h];c.length=0,s=0;for(var d=0,y=f.length;d<y;d+=1){var v=f[d],p=v.search(n),k=p.isMatch,m=p.indices,M=p.score;if(!k){u=0,s=0,c.length=0;break}if(s+=1,u+=M,a){var b=v.constructor.type;me.has(b)?c=[].concat(W(c),W(m)):c.push(m)}}if(s){var _={isMatch:!0,score:u/s};return a&&(_.indices=c),_}}return{isMatch:!1,score:1}}}],[{key:"condition",value:function(n,r){return r.useExtendedSearch}}]),i}(),q=[];function pt(i,n){for(var r=0,o=q.length;r<o;r+=1){var a=q[r];if(a.condition(i,n))return new a(i,n)}return new Ft(i,n)}var mt="$and",Me="$or",Dt="$path",be="$val",kt=function(i){return!(!i[mt]&&!i[Me])},xe=function(i){return!!i[Dt]},we=function(i){return!$(i)&&It(i)&&!kt(i)},Ut=function(i){return ht({},mt,Object.keys(i).map(function(n){return ht({},n,i[n])}))};function Se(i,n){var r=n.ignoreFieldNorm,o=r===void 0?g.ignoreFieldNorm:r;i.forEach(function(a){var s=1;a.matches.forEach(function(c){var u=c.key,h=c.norm,l=c.score,f=u?u.weight:null;s*=Math.pow(l===0&&f?Number.EPSILON:l,(f||1)*(o?1:h))}),a.score=s})}function _e(i,n){var r=i.matches;n.matches=[],S(r)&&r.forEach(function(o){if(S(o.indices)&&o.indices.length){var a={indices:o.indices,value:o.value};o.key&&(a.key=o.key.src),o.idx>-1&&(a.refIndex=o.idx),n.matches.push(a)}})}function Le(i,n){n.score=i.score}function Oe(i,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=r.includeMatches,a=o===void 0?g.includeMatches:o,s=r.includeScore,c=s===void 0?g.includeScore:s,u=[];return a&&u.push(_e),c&&u.push(Le),i.map(function(h){var l=h.idx,f={item:n[l],refIndex:l};return u.length&&u.forEach(function(d){d(h,f)}),f})}var X=function(){function i(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;x(this,i),this.options=J(J({},g),r),this.options.useExtendedSearch,this._keyStore=new ie(this.options.keys),this.setCollection(n,o)}return w(i,[{key:"setCollection",value:function(n,r){if(this._docs=n,r&&!(r instanceof vt))throw new Error("Incorrect 'index' type");this._myIndex=r||Rt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}},{key:"add",value:function(n){S(n)&&(this._docs.push(n),this._myIndex.add(n))}},{key:"remove",value:function(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){return!1},r=[],o=0,a=this._docs.length;o<a;o+=1){var s=this._docs[o];n(s,o)&&(this.removeAt(o),o-=1,a-=1,r.push(s))}return r}},{key:"removeAt",value:function(n){this._docs.splice(n,1),this._myIndex.removeAt(n)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.limit,a=o===void 0?-1:o,s=this.options,c=s.includeMatches,u=s.includeScore,h=s.shouldSort,l=s.sortFn,f=s.ignoreFieldNorm,d=I(n)?I(this._docs[0])?this._searchStringList(n):this._searchObjectList(n):this._searchLogical(n);return Se(d,{ignoreFieldNorm:f}),h&&d.sort(l),jt(a)&&a>-1&&(d=d.slice(0,a)),Oe(d,this._docs,{includeMatches:c,includeScore:u})}},{key:"_searchStringList",value:function(n){var r=pt(n,this.options),o=this._myIndex.records,a=[];return o.forEach(function(s){var c=s.v,u=s.i,h=s.n;if(S(c)){var l=r.searchIn(c),f=l.isMatch,d=l.score,y=l.indices;f&&a.push({item:c,idx:u,matches:[{score:d,value:c,norm:h,indices:y}]})}}),a}},{key:"_searchLogical",value:function(n){var r=this,o=function(h,l){var f=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).auto,d=f===void 0||f,y=function v(p){var k=Object.keys(p),m=xe(p);if(!m&&k.length>1&&!kt(p))return v(Ut(p));if(we(p)){var M=m?p[Dt]:k[0],b=m?p[be]:p[M];if(!I(b))throw new Error(ne(M));var _={keyId:gt(M),pattern:b};return d&&(_.searcher=pt(b,l)),_}var O={children:[],operator:k[0]};return k.forEach(function(L){var A=p[L];$(A)&&A.forEach(function(V){O.children.push(v(V))})}),O};return kt(h)||(h=Ut(h)),y(h)}(n,this.options),a=function h(l,f,d){if(!l.children){var y=l.keyId,v=l.searcher,p=r._findMatches({key:r._keyStore.get(y),value:r._myIndex.getValueForItemAtKeyId(f,y),searcher:v});return p&&p.length?[{idx:d,item:f,matches:p}]:[]}for(var k=[],m=0,M=l.children.length;m<M;m+=1){var b=h(l.children[m],f,d);if(b.length)k.push.apply(k,W(b));else if(l.operator===mt)return[]}return k},s=this._myIndex.records,c={},u=[];return s.forEach(function(h){var l=h.$,f=h.i;if(S(l)){var d=a(o,l,f);d.length&&(c[f]||(c[f]={idx:f,item:l,matches:[]},u.push(c[f])),d.forEach(function(y){var v,p=y.matches;(v=c[f].matches).push.apply(v,W(p))}))}}),u}},{key:"_searchObjectList",value:function(n){var r=this,o=pt(n,this.options),a=this._myIndex,s=a.keys,c=a.records,u=[];return c.forEach(function(h){var l=h.$,f=h.i;if(S(l)){var d=[];s.forEach(function(y,v){d.push.apply(d,W(r._findMatches({key:y,value:l[v],searcher:o})))}),d.length&&u.push({idx:f,item:l,matches:d})}}),u}},{key:"_findMatches",value:function(n){var r=n.key,o=n.value,a=n.searcher;if(!S(o))return[];var s=[];if($(o))o.forEach(function(y){var v=y.v,p=y.i,k=y.n;if(S(v)){var m=a.searchIn(v),M=m.isMatch,b=m.score,_=m.indices;M&&s.push({score:b,key:r,value:v,idx:p,norm:k,indices:_})}});else{var c=o.v,u=o.n,h=a.searchIn(c),l=h.isMatch,f=h.score,d=h.indices;l&&s.push({score:f,key:r,value:c,norm:u,indices:d})}return s}}]),i}();return X.version="6.6.2",X.createIndex=Rt,X.parseIndex=function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.getFn,o=r===void 0?g.getFn:r,a=n.fieldNormWeight,s=a===void 0?g.fieldNormWeight:a,c=i.keys,u=i.records,h=new vt({getFn:o,fieldNormWeight:s});return h.setKeys(c),h.setIndexRecords(u),h},X.config=g,function(){q.push.apply(q,arguments)}(ke),X},typeof exports=="object"&&typeof module<"u"?module.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).Fuse=t();
